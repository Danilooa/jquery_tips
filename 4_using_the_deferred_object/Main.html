<html>

<head>
    <script src="jquery-3.3.1.min.js"></script>
    <style>
        .display {
            width: 300px;
            height: 300px;
            border-style: solid;
            border-width: 1px;
            margin-left: 5px;
        }

        .displayContainer {
            float: left;
            margin-top: 10px;
        }

        .newLine {
            clear: both;
            float: left;
            margin-top: 10px
        }
    </style>
    <script>
        $(document).ready(function () {

            let writeMessage = function (message) {
                $("#divMessage").html(
                    $("#divMessage").html() +
                    "<br/>" +
                    message);
            }

            let loadContent = function (options) {
                let deferred = jQuery.Deferred();
                let contentUrl = options.url;
                let targetElement = $("#" + options.target);


                $.get(contentUrl, function () { }, 'html')
                    .done(
                        function (result) {
                            targetElement.html(result);
                            deferred.resolve();
                        })
                    .fail(
                        function (result) {
                            writeMessage("Error while loading: " + contentUrl);
                            deferred.reject(result);
                        });

                return deferred.promise();
            }

            let load = function () {
                $.when(
                    loadContent({ url: 'content1.html', target: 'checkboxFail1' }),
                    loadContent({ url: 'content2.html', target: 'checkboxFail2' }),
                    loadContent({ url: 'content3.html', target: 'checkboxFail3' }),
                )
                    .done(function (result) {
                        writeMessage("All promises were kept");
                    })
                    .fail(function (reason) {
                        writeMessage("Some of the promises were rejected " + reason.statusText);
                    });
            };

            $("#buttonLoad").on("click", load);
        });
    </script>
</head>

<body>
    <button id="buttonLoad">Load</button>
    <br/>
    <div class="displayContainer">
        <input type="checkbox" id="checkboxFail1" />
        <label for="checkboxFail1">Forces fail</label>
        <div id="display1" class="display"></div>
    </div>
    <div class="displayContainer">
        <input type="checkbox" id="checkboxFail2" />
        <label for="checkboxFail2">Forces fail</label>
        <div id="display2" class="display"></div>
    </div>
    <div class="displayContainer">
        <input type="checkbox" id="checkboxFail3" />
        <label for="checkboxFail3">Forces fail</label>
        <div id="display3" class="display"></div>
    </div>
    <button id="buttonProceed" class="newLine">Proceed</button>
    <div id="divMessage" class="newLine"></div>
</body>

</html>